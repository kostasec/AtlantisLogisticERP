<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title><%= pageTitle %></title>
  <style>
    body {
      font-family: "Inter", "Segoe UI", Arial, sans-serif;
      margin: 50px;
      background: #f9f9f9;
      color: #333;
    }

    form {
      max-width: 900px;
      margin: 0 auto;
      padding: 25px;
      border: 1px solid #e0e0e0;
      border-radius: 12px;
      box-shadow: 0 4px 16px rgba(0,0,0,0.06);
      background: #fff;
    }

    h2, h3 {
      margin-top: 20px;
      margin-bottom: 10px;
    }

    label {
      display: block;
      margin-top: 10px;
      font-weight: 500;
    }

    input[type="text"],
    input[type="email"] {
      width: 100%;
      padding: 8px;
      margin-top: 5px;
      border: 1px solid #ccc;
      border-radius: 6px;
    }

    .contact-form {
      border: 1px solid #e0e0e0;
      padding: 15px;
      margin-top: 15px;
      border-radius: 8px;
      background: #fafafa;
    }

    button {
      margin-top: 15px;
      padding: 10px 15px;
      border: none;
      border-radius: 6px;
      background-color: #1976d2;
      color: white;
      cursor: pointer;
    }

    button:hover {
      background-color: #1565c0;
    }

    .delete-contact-btn {
      background-color: #c62828;
      margin-left: 10px;
    }
    .delete-contact-btn:hover {
      background-color: #b71c1c;
    }
  </style>
</head>
<body>
  <form action="/admin/client/upsert" method="POST">
    <h2><%= pageTitle %></h2>

    <label>Tax ID:</label>
    <input type="text" name="TaxID" value="<%= client.TaxID || '' %>" required>

    <label>Registration Number:</label>
    <input type="text" name="RegNmbr" id="RegNmbr" value="<%= client.RegNmbr || '' %>">

    <label>Client Name:</label>
    <input type="text" name="ClientName" value="<%= client.ClientName || '' %>" required>

    <label>Street and Number:</label>
    <input type="text" name="StreetAndNmbr" value="<%= client.StreetAndNmbr || '' %>">

    <label>City:</label>
    <input type="text" name="City" value="<%= client.City || '' %>">

    <label>ZIP:</label>
    <input type="text" name="ZIP" value="<%= client.ZIP || '' %>">

    <label>Country:</label>
    <input type="text" name="Country" value="<%= client.Country || '' %>">

    <label>Email:</label>
    <input type="email" name="Email" value="<%= client.Email || '' %>">

    



    <h3>Contact Persons</h3>
    <div id="contacts-container">
      <% if (contacts && contacts.length > 0) { %>
        <% contacts.forEach(function(contact, index) { %>
          <div class="contact-form">
            <input type="hidden" name="contacts[<%= index %>][ContactPersonID]" value="<%= contact.ContactPersonID || '' %>">

            <label>Name:</label>
            <input type="text" name="contacts[<%= index %>][ContactName]" value="<%= contact.ContactName || '' %>">

            <label>Description:</label>
            <input type="text" name="contacts[<%= index %>][Description]" value="<%= contact.Description || '' %>">

            <label>Phone:</label>
            <input type="text" name="contacts[<%= index %>][PhoneNmbr]" value="<%= contact.PhoneNmbr || '' %>">

            <label>Email:</label>
            <input type="text" name="contacts[<%= index %>][PersonEmail]" value="<%= contact.PersonEmail || '' %>">

            
          </div>
        <% }); %>
      <% } %>
    </div>

    <button type="button" id="add-contact-btn">Add Contact</button>

    <br><br>
    <button type="submit">Save Client</button>
  </form>

  <script>
    document.getElementById('add-contact-btn').addEventListener('click', function () {
      const container = document.getElementById('contacts-container');
      const index = container.children.length;
      const html = `
        <div class="contact-form">
          <input type="hidden" name="contacts[${index}][ContactPersonID]" value="">
          <label>Name:</label>
          <input type="text" name="contacts[${index}][ContactName]" value="">
          <label>Description:</label>
          <input type="text" name="contacts[${index}][Description]" value="">
          <label>Phone:</label>
          <input type="text" name="contacts[${index}][PhoneNmbr]" value="">
          <label>Email:</label>
          <input type="text" name="contacts[${index}][PersonEmail]" value="">
          <button type="button" class="delete-contact-btn" onclick="this.parentElement.remove()">Remove</button>
        </div>`;
      container.insertAdjacentHTML('beforeend', html);
    });
  </script>
</body>
</html>
