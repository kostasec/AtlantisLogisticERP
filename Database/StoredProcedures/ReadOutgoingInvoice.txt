CREATE PROCEDURE [dbo].[sp_ReadOutgoingInvoices]
AS
BEGIN
    SET NOCOUNT ON;

    SELECT 
        ds.DStatusName,
        ps.ProcessingStatusName,
        oi.OutInvoiceNmbr,
        c.ClientName,
        oi.Sent,
        oi.Delivered,
        py.PaymentStatusName
    FROM dbo.OutgoingInvoice oi
    LEFT JOIN dbo.Client c               ON oi.TaxID = c.TaxID
    LEFT JOIN dbo.DocumentStatusList ds ON oi.DStatusID = ds.DStatusID
    LEFT JOIN dbo.ProcessingStatusList ps ON oi.ProcessingStatus = ps.ProcessingStatusID
    LEFT JOIN dbo.PaymentStatusList py  ON oi.PaymentStatus = py.PaymentStatusID
    ORDER BY oi.Sent DESC, oi.OutInvoiceNmbr;
END
GO
